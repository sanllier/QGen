all: qgen

OBJECTS = obj/qgen.o obj/qindivid_base.o \
          obj/qindivid_cpu.o obj/qindivid_gpu.o \
          obj/qobservestate.o obj/qrotoperator.o \
          obj/gpu_rand.o obj/pugixml.o \
          obj/mpicheck.o obj/mtrand.o
DFLAG =
CFLAG = -std=c++11 -Iinclude/ -O3

qgen: $(OBJECTS)
	@mkdir -p lib
	@echo "\033[30;1;41m "lib" dir created \033[0m"
	@ar rc lib/QGen_gpu.a $(OBJECTS)
	@echo "\033[30;1;41m QGen builded successfully! \033[0m"
	@echo "\033[30;1;41m --> lib/QGen_cpu.a \033[0m\n"

obj/qgen.o: src/qgen.cpp
	mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/qindivid_base.o: src/qindivid_base.cpp
	@mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/qindivid_cpu.o: src/qindivid_base.cpp
	@mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/qindivid_gpu.o: src/qindivid_base.cpp
	@mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/qobservestate.o: src/qobservestate.cpp
	@mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/qrotoperator.o: src/qrotoperator.cpp
	@mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/gpu_rand.o: src/gpu_rand.cpp
	@mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/pugixml.o: src/pugixml.cpp
	@mkdir -p obj
	@mpicxx -c $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/mpicheck.o: src/mpicheck.cpp
	@mkdir -p obj
	@mpicxx -c $(DFLAG) $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

obj/mtrand.o: src/mtrand.cpp
	@mkdir -p obj
	@mpicxx -c $(CFLAG) $^ -o $@
	@echo "\033[30;1;46m $@ - done \033[0m\n"

clean:
	rm -r -f lib
	rm -r -f obj